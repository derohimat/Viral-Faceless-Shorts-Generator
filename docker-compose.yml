services:
  trendscraper:
    build:
      context: ./trendscraper
    environment:
      - GEMINI_API_KEY
      - LOCALE
      - COQUI_SPEAKER_ID
    volumes:
      - ./videos:/mnt/videos
      - ./outputs:/app/outputs
  coqui:
    build:
      context: ./coqui
  speechalign:
    build:
      context: ./speechalign
  nginx:
    image: nginx:latest
    ports:
      - "80:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/html:/usr/share/nginx/html
      - ./outputs:/usr/share/nginx/html/outputs:ro
    depends_on:
      - trendscraper
      - coqui
      - speechalign
